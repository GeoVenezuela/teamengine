<package
 xmlns:example="http://www.somehost.com/example"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ctl="http://www.occamlab.com/ctl"
 xmlns="http://www.occamlab.com/ctl"
 xmlns:parsers="http://www.occamlab.com/te/parsers"
>
	<!-- Declare a custom XMLValidatingParser, passing in the schemas it recognizes -->
	<parser name="example:XMLValidatingParser">
		<java class="com.occamlab.te.parsers.XMLValidatingParser" method="parse" initialized="true">
			<with-param name="schemas_links">
				<parsers:schemas>
					<parsers:schema type="url">http://schemas.opengis.net/wms/1.3.0/exceptions_1_3_0.xsd</parsers:schema>
					<!-- more schema elements here ... -->
				</parsers:schemas>
			</with-param>
		</java>
	</parser>

	<test name="example:test">
		<assertion>Default and custom parsers are demonstrated</assertion>
		<code>
			<call-test name="example:default"/>
			<call-test name="example:custom"/>
		</code>
	</test>

	<test name="example:default">
		<assertion>Example using the builtin XMLValidatingParser is demonstrated</assertion>
		<code>
			<xsl:variable name="results">
				<request>
					<url>http://schemas.opengis.net/wms/1.3.0/exceptions_1_3_0.xml</url>
					<method>get</method>
					<parsers:XMLValidatingParser>
						<parsers:schemas>
							<parsers:schema type="url">http://schemas.opengis.net/wms/1.3.0/exceptions_1_3_0.xsd</parsers:schema>
						</parsers:schemas>
					</parsers:XMLValidatingParser>
				</request>
			</xsl:variable>
			<xsl:if test="not($results/*)">
				<fail/>
			</xsl:if>
		</code>
	</test>

	<test name="example:custom">
		<assertion>Equivalent example using the custom XMLValidatingParser is demonstrated</assertion>
		<code>
			<xsl:variable name="results">
				<request>
					<url>http://schemas.opengis.net/wms/1.3.0/exceptions_1_3_0.xml</url>
					<method>get</method>
					<example:XMLValidatingParser/>
				</request>
			</xsl:variable>
<!--				<out select="$results"/> -->
			<xsl:if test="not($results/*)">
				<fail/>
			</xsl:if>
		</code>
	</test>

	<suite name="example:suite">
		<title>Parser demonstration</title>
		<description>Parser demonstration</description>
		<starting-test>example:test</starting-test>
	</suite>
</package>

